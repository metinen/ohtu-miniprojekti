<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Kayttoliittyma.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ohtu-miniprojekti</a> &gt; <a href="index.source.html" class="el_package">Kayttoliittyma</a> &gt; <span class="el_source">Kayttoliittyma.java</span></div><h1>Kayttoliittyma.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Kayttoliittyma;

import Vinkkitietokanta.LukuStatus;
import Vinkkitietokanta.Vinkki;
import Vinkkitietokanta.VinkkitietokantaRajapinta;
import apuviritykset.Validator;
import io.Lukija;
import io.LukijaRajapinta;
import io.Tulostaja;
import io.TulostusRajapinta;
import java.util.List;

/**
 * Itse käyttöliittymä.
 */
public class Kayttoliittyma {

<span class="fc" id="L23">    private final String KOMENNOT = &quot;Komennot:&quot;</span>
            + &quot;\n\t lisää kirja - kirjavinkin lisääminen&quot;
            + &quot;\n\t lisää podcast - podcast-vinkin lisääminen&quot;
            + &quot;\n\t lisää video - videovinkin lisääminen&quot;
            + &quot;\n\t lisää blogpost - blogpost-vinkin lisääminen&quot;
            + &quot;\n\t tulosta kaikki - tulosta kaikki vinkit&quot;
            + &quot;\n\t lukemattomat - tulosta kaikki lukemattomat vinkit&quot;
            + &quot;\n\t luetut - tulosta kaikki luetut vinkit&quot;
            + &quot;\n\t tulosta kirjat - tulosta kaikki kirjavinkit&quot;
            + &quot;\n\t tulosta podcastit - tulosta kaikki podcastit&quot;
            + &quot;\n\t tulosta videot - tulosta kaikki videot&quot;
            + &quot;\n\t tulosta blogpostit - tulosta kaikki blogpostit&quot;
            + &quot;\n\t merkitse luetuksi - merkitse luetuksi&quot;
            + &quot;\n\t poista - poista vinkki&quot;
            + &quot;\n\t lopeta - lopeta ohjelma &quot;
            + &quot;\n&quot;;

    VinkkitietokantaRajapinta tk;
    LukijaRajapinta lukija;
    TulostusRajapinta tulostus;

<span class="fc" id="L44">    public Kayttoliittyma(VinkkitietokantaRajapinta tk) {</span>
<span class="fc" id="L45">        this.tk = tk;</span>
<span class="fc" id="L46">        this.lukija = new Lukija(System.in);</span>
<span class="fc" id="L47">        this.tulostus = new Tulostaja(System.out);</span>

<span class="fc" id="L49">    }</span>

    public void setLukija(LukijaRajapinta lukija) {
<span class="fc" id="L52">        this.lukija = lukija;</span>
<span class="fc" id="L53">    }</span>

    public void setTulostus(TulostusRajapinta tulostus) {
<span class="fc" id="L56">        this.tulostus = tulostus;</span>
<span class="fc" id="L57">    }</span>

    public void suorita() {

        while (true) {
<span class="fc" id="L62">            this.tulostaKomennot();</span>
<span class="fc" id="L63">            String komento = this.lukija.nextLine().toLowerCase();</span>

<span class="pc bpc" id="L65" title="34 of 58 branches missed.">            switch (komento) {</span>

                /* LISÄÄMINEN ALKAA */
                case &quot;lisää kirja&quot;:
<span class="fc" id="L69">                    this.lisaaKirjavinkki();</span>
<span class="fc" id="L70">                    break;</span>
                case &quot;lisää podcast&quot;:
<span class="fc" id="L72">                    this.lisaaPodcast();</span>
<span class="fc" id="L73">                    break;</span>
                case &quot;lisää video&quot;:
<span class="fc" id="L75">                    this.lisaaVideo();</span>
<span class="fc" id="L76">                    break;</span>
                case &quot;lisää blogpost&quot;:
<span class="nc" id="L78">                    this.lisaaBlogpost();</span>
<span class="nc" id="L79">                    break;</span>
                /* LISÄÄMINEN LOPPUU */

 /* TULOSTUS ALKAA */
                case &quot;tulosta kaikki&quot;:
<span class="fc" id="L84">                    this.tulostaKaikkiVinkit();</span>
<span class="fc" id="L85">                    break;</span>
                case &quot;lukemattomat&quot;:
<span class="fc" id="L87">                    this.tulostaKaikkiLukemattomat();</span>
<span class="fc" id="L88">                    break;</span>
                case &quot;luetut&quot;:
<span class="nc" id="L90">                    this.tulostaKaikkiLuetut();</span>
<span class="nc" id="L91">                    break;</span>
                case &quot;tulosta kirjat&quot;:
<span class="fc" id="L93">                    this.tulostaKirjavinkit();</span>
<span class="fc" id="L94">                    break;</span>
                case &quot;tulosta podcastit&quot;:
<span class="nc" id="L96">                    this.tulostaPodcastit();</span>
<span class="nc" id="L97">                    break;</span>
                case &quot;tulosta videot&quot;:
<span class="fc" id="L99">                    this.tulostaVideot();</span>
<span class="fc" id="L100">                    break;</span>
                case &quot;tulosta blogpostit&quot;:
<span class="nc" id="L102">                    this.tulostaBlogpostit();</span>
<span class="nc" id="L103">                    break;</span>
                /* TULOSTUS LOPPUU */

                case &quot;merkitse luetuksi&quot;:
<span class="nc" id="L107">                    this.merkitseLuetuksi();</span>
<span class="nc" id="L108">                    break;</span>
                case &quot;poista&quot;:
<span class="nc" id="L110">                    this.poista();</span>
<span class="nc" id="L111">                    break;</span>

                case &quot;lopeta&quot;:
<span class="fc" id="L114">                    return;</span>
                default:

            }

<span class="fc" id="L119">        }</span>

    }

    private void poista() {
<span class="nc" id="L124">        this.tulostus.println(&quot;Anna otsikko:&quot;);</span>
<span class="nc" id="L125">        String otsikko = this.lukija.nextLine();</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">        if (this.poistaVinkki(otsikko)) {</span>
<span class="nc" id="L127">            this.tulostus.println(&quot;Vinkki poistettu&quot;);</span>
        } else {
<span class="nc" id="L129">            this.tulostus.println(&quot;Vinkkiä ei poistettu&quot;);</span>
        }
<span class="nc" id="L131">    }</span>

    private void lisaaPodcast() {
<span class="fc" id="L134">        this.tulostus.println(&quot;Anna nimi:&quot;);</span>
<span class="fc" id="L135">        String nimi = this.lukija.nextLine();</span>
<span class="fc" id="L136">        this.tulostus.println(&quot;Anna otsikko:&quot;);</span>
<span class="fc" id="L137">        String otsikko = this.lukija.nextLine();</span>
<span class="fc" id="L138">        this.tulostus.println(&quot;Anna kuvaus:&quot;);</span>
<span class="fc" id="L139">        String kuvaus = this.lukija.nextLine();</span>

<span class="fc bfc" id="L141" title="All 2 branches covered.">        if (Validator.podcastvinkinSyoteOk(nimi, otsikko, kuvaus)) {</span>
<span class="pc bpc" id="L142" title="1 of 2 branches missed.">            if (this.tk.lisaaPodcast(nimi, otsikko, kuvaus)) {</span>
<span class="fc" id="L143">                this.tulostus.println(&quot;Podcast lisätty&quot;);</span>
<span class="fc" id="L144">                return;</span>
            }
        }
<span class="fc" id="L147">        this.tulostus.println(&quot;Podcastia ei lisätty&quot;);</span>
<span class="fc" id="L148">    }</span>

    private void lisaaKirjavinkki() {
<span class="fc" id="L151">        this.tulostus.println(&quot;Anna kirjoittaja:&quot;);</span>
<span class="fc" id="L152">        String kirjoittaja = this.lukija.nextLine();</span>
<span class="fc" id="L153">        this.tulostus.println(&quot;Anna otsikko:&quot;);</span>
<span class="fc" id="L154">        String otsikko = this.lukija.nextLine();</span>

<span class="fc bfc" id="L156" title="All 2 branches covered.">        if (Validator.kirjavinkinSyoteOk(kirjoittaja, otsikko)) {</span>
<span class="pc bpc" id="L157" title="1 of 2 branches missed.">            if (this.tk.lisaaKirja(kirjoittaja, otsikko)) {</span>
<span class="fc" id="L158">                this.tulostus.println(&quot;Kirjavinkki lisätty&quot;);</span>
<span class="fc" id="L159">                return;</span>
            }
        }
<span class="fc" id="L162">        this.tulostus.println(&quot;Kirjavinkkiä ei lisätty&quot;);</span>
<span class="fc" id="L163">    }</span>

    private void lisaaVideo() {
<span class="fc" id="L166">        this.tulostus.println(&quot;Anna url:&quot;);</span>
<span class="fc" id="L167">        String url = this.lukija.nextLine();</span>
<span class="fc" id="L168">        this.tulostus.println(&quot;Anna otsikko:&quot;);</span>
<span class="fc" id="L169">        String otsikko = this.lukija.nextLine();</span>

<span class="fc bfc" id="L171" title="All 2 branches covered.">        if (Validator.videovinkinSyoteOk(url, otsikko)) {</span>
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">            if (this.tk.lisaaVideo(url, otsikko)) {</span>
<span class="fc" id="L173">                this.tulostus.println(&quot;Video lisätty&quot;);</span>
<span class="fc" id="L174">                return;</span>
            }
        }
<span class="fc" id="L177">        this.tulostus.println(&quot;Videota ei lisätty&quot;);</span>
<span class="fc" id="L178">    }</span>

    private void lisaaBlogpost() {
<span class="nc" id="L181">        this.tulostus.println(&quot;Anna url:&quot;);</span>
<span class="nc" id="L182">        String url = this.lukija.nextLine();</span>
<span class="nc" id="L183">        this.tulostus.println(&quot;Anna kirjoittaja:&quot;);</span>
<span class="nc" id="L184">        String kirjoittajat = this.lukija.nextLine();</span>
<span class="nc" id="L185">        this.tulostus.println(&quot;Anna otsikko:&quot;);</span>
<span class="nc" id="L186">        String otsikko = this.lukija.nextLine();</span>
        // Syötteen validointi puuttuu vielä
<span class="nc" id="L188">    }</span>

    private void merkitseLuetuksi() {
<span class="nc" id="L191">        this.tulostus.println(&quot;Anna sen vinkin otsikko, joka merkitään luetuksi&quot;);</span>
<span class="nc" id="L192">        String otsikko = this.lukija.nextLine();</span>
<span class="nc" id="L193">        throw new UnsupportedOperationException(&quot;Not supported yet.&quot;); //To change body of generated methods, choose Tools | Templates.</span>
    }

    /* KANNAN METODEITA KUTSUVAT METODIT */
    private List&lt;Vinkki&gt; haeKaikkiVinkit() {
<span class="fc" id="L198">        return this.tk.haeKaikki();</span>
    }

    private List&lt;Vinkki&gt; haeKaikkuLukemattomat() {
<span class="fc" id="L202">        return this.tk.haeKaikki(LukuStatus.LUKEMATTOMAT);</span>
    }

    private List&lt;Vinkki&gt; haeKaikkiLuetut() {
<span class="nc" id="L206">        return this.tk.haeKaikki(LukuStatus.LUETTU);</span>
    }

    public List&lt;Vinkki&gt; haeKaikkiKirjavinkit() {
<span class="fc" id="L210">        return this.tk.haeKaikkiKirjat(LukuStatus.KAIKKI);</span>
    }

    public List&lt;Vinkki&gt; haeKaikkiPodcastvinkit() {
<span class="nc" id="L214">        return this.tk.haeKaikkiPodcast(LukuStatus.KAIKKI);</span>
    }

    public List&lt;Vinkki&gt; haeKaikkiVideovinkit() {
<span class="fc" id="L218">        return this.tk.haeKaikkiVideot(LukuStatus.KAIKKI);</span>
    }

    public List&lt;Vinkki&gt; haeKaikkiBlogpostvinkit() {
<span class="nc" id="L222">        return this.tk.haeKaikkiBlogpost(LukuStatus.KAIKKI);</span>
    }

    private boolean poistaVinkki(String otsikko) {
<span class="nc" id="L226">        return this.tk.poistaVinkki(otsikko);</span>
    }

    public boolean poistaKirja(String otsikko) {
<span class="nc" id="L230">        return this.tk.poistaKirja(otsikko);</span>
    }

    /* KANTAA KUTSUVAT METODIT LOPPUVAT TÄHÄN*/

 /* TULOSTUS */
    private void tulostaKirjavinkit() {
<span class="fc" id="L237">        tulostaLista(this.haeKaikkiKirjavinkit());</span>
<span class="fc" id="L238">    }</span>

    private void tulostaPodcastit() {
<span class="nc" id="L241">        tulostaLista(this.haeKaikkiPodcastvinkit());</span>
<span class="nc" id="L242">    }</span>

    private void tulostaVideot() {
<span class="fc" id="L245">        tulostaLista(this.haeKaikkiVideovinkit());</span>
<span class="fc" id="L246">    }</span>

    private void tulostaBlogpostit() {
<span class="nc" id="L249">        tulostaLista(this.haeKaikkiBlogpostvinkit());</span>
<span class="nc" id="L250">    }</span>

    private void tulostaKomennot() {
<span class="fc" id="L253">        this.tulostus.println(this.KOMENNOT);</span>
<span class="fc" id="L254">    }</span>

    private void tulostaKaikkiVinkit() {
<span class="fc" id="L257">        this.tulostaLista(this.haeKaikkiVinkit());</span>
<span class="fc" id="L258">    }</span>

    private void tulostaKaikkiLukemattomat() {
<span class="fc" id="L261">        this.tulostaLista(this.haeKaikkuLukemattomat());</span>
<span class="fc" id="L262">    }</span>

    private void tulostaKaikkiLuetut() {
<span class="nc" id="L265">        this.tulostaLista(this.haeKaikkiLuetut());</span>
<span class="nc" id="L266">    }</span>

    private void tulostaLista(List&lt;Vinkki&gt; lista) {
<span class="fc bfc" id="L269" title="All 2 branches covered.">        for (Vinkki v : lista) {</span>
<span class="fc" id="L270">            this.tulostus.println(v.toString());</span>
<span class="fc" id="L271">        }</span>
<span class="fc" id="L272">    }</span>
    /* TULOSTUS PÄÄTTYY*/

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>